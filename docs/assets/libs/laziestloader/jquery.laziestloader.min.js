!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(f){var g=function(r,e){var t=f(window),o=this,s=f(),n=1<window.devicePixelRatio,i=!1,a="string"==typeof(r=f.extend(!0,{threshold:0,sizePattern:/{{SIZE}}/gi,getSource:function(i){var t,e,o=i.data();t=o.pattern&&o.widths&&f.isArray(o.widths)?(t=(t=n?o.patternRetina:o.pattern)||o.pattern,"object"==typeof o.widths[0]?(e=function(){for(var t=f.map(o.widths,function(t){return t.size}),e=c(i.width(),t),n=o.widths.length-1;0<=n;n--)if(o.widths[n].size===e)return o.widths[n].slug}(),t.replace(r.sizePattern,e)):t.replace(r.sizePattern,c(i.width(),o.widths))):(t=n?o.srcRetina:o.src)||o.src;return t},event:"scroll",scrollThrottle:250,sizeOffsetPercent:0,setSourceMode:!0},r)).event&&0===r.event.indexOf("scroll");function d(t){t.addClass("ll-loaded").removeClass("ll-notloaded"),t.trigger("loaded"),"function"==typeof e&&e.call(t)}function l(){o.one("laziestloader",function(){var t,e=f(this);e.data().ratio&&u.call(this),r.setSourceMode&&(t=r.getSource(e))&&this.getAttribute("src")!==t&&this.setAttribute("src",t),e.addClass("ll-loadstarted"),!r.setSourceMode||"IMG"!==this.nodeName&&"VIDEO"!==this.nodeName&&"AUDIO"!==this.nodeName?d(e):"IMG"===this.nodeName?this.onload=function(){d(e)}:this.onloadstart=function(){d(e)}})}var c=g.bestFit=function(t,e){var n=e[e.length-1],i=e.length,o=t*(r.sizeOffsetPercent/100);for(e.sort(function(t,e){return t-e});i--;)t-o<=e[i]&&(n=e[i]);return n};function h(){var t=document.documentElement,e=window.innerHeight||t.clientHeight,n=window.innerWidth||t.clientWidth,i=r.threshold,t=o.not(s).filter(function(){if(!f(this).is(":hidden")){var t=f(this)[0].getBoundingClientRect();return 0<t.bottom+i&&0<t.right+i&&t.left<n+i&&t.top<e+i}});t.trigger("laziestloader"),s.add(t)}function u(){var t=f(this),e=t.data();e.ratio=e.ratio||e.heightMultiplier,e.ratio&&t.css({height:Math.round(t.width()*e.ratio)})}return o.addClass("ll-init ll-notloaded").each(u),l(),a?(t.on("scroll",function(){i=!0}),setInterval(function(){i&&(i=!1,h())},r.scrollThrottle)):"function"==typeof r.event?r.event(h):t.on(r.event,function(){h()}),t.on("resize",function(){s=f(),o.off("laziestloader"),l(),h()}),f(document).ready(function(){h()}),this};f.fn.laziestloader=g});
